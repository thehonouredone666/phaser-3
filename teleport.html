<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Phaser Teleport Game</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
  </head>
  <body>
    <script>
      const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
          default: 'arcade',
          arcade: {
            debug: false
          }
        },
        scene: {
          preload: preload,
          create: create,
          update: update
        }
      };

      const game = new Phaser.Game(config);

      let player;
      let cursors;
      let doors = {};

      function preload() {
        // Simple graphics using Phaser's built-in shapes
      }

      function create() {
        // Create player as a rectangle
        player = this.add.rectangle(100, 100, 40, 40, 0x00ff00);
        this.physics.add.existing(player);
        player.body.setCollideWorldBounds(true);

        // Create doors
        doors.door1 = this.add.rectangle(200, 300, 50, 80, 0xff0000);
        doors.door2 = this.add.rectangle(400, 300, 50, 80, 0x0000ff);
        doors.door3 = this.add.rectangle(600, 300, 50, 80, 0xffff00);

        // Enable physics
        this.physics.add.existing(doors.door1, true);
        this.physics.add.existing(doors.door2, true);
        this.physics.add.existing(doors.door3, true);

        // Overlap checks
        this.physics.add.overlap(player, doors.door1, () => teleport(player, doors.door2));
        this.physics.add.overlap(player, doors.door2, () => teleport(player, doors.door3));
        this.physics.add.overlap(player, doors.door3, () => teleport(player, doors.door1));

        // WASD keys
        cursors = this.input.keyboard.addKeys({
          up: Phaser.Input.Keyboard.KeyCodes.W,
          down: Phaser.Input.Keyboard.KeyCodes.S,
          left: Phaser.Input.Keyboard.KeyCodes.A,
          right: Phaser.Input.Keyboard.KeyCodes.D
        });
      }

      function update() {
        const speed = 200;
        player.body.setVelocity(0);

        if (cursors.left.isDown) {
          player.body.setVelocityX(-speed);
        } else if (cursors.right.isDown) {
          player.body.setVelocityX(speed);
        }

        if (cursors.up.isDown) {
          player.body.setVelocityY(-speed);
        } else if (cursors.down.isDown) {
          player.body.setVelocityY(speed);
        }
      }

      function teleport(player, targetDoor) {
        player.x = targetDoor.x;
        player.y = targetDoor.y - 100; // place above the door
      }
    </script>
  </body>
</html>
